{% extends 'base.html' %}
{% load static %}

{% block title %}Fresh Groceries Delivered{% endblock %}

{% block content %}

<!-- Hero -->
<section class='py-5 rounded-3 mb-4 main-banner'>
  <div class='container'>
    <div class='row align-items-center g-4'>
      <div class='col-lg-7'>
        <h1 class='display-5 fw-bold mb-3'>Fresh groceries delivered fast</h1>
        <p class='lead text-muted mb-4'>Shop thousands of essentials at fair prices with convenient delivery windows.</p>
        <div class='d-flex gap-2'>
          <a href="{% url 'product_list' %}" class='btn btn-primary btn-lg'>Shop now</a>
          {% if not user.is_authenticated %}
          <a href="{% url 'signup' %}" class='create_account btn btn-outline-secondary btn-lg'>Create account</a>
          {% endif %}
        </div>
      </div>
      <div class='col-lg-5'>
        <div class='ratio ratio-16x9 rounded overflow-hidden'>
          <img src="{% static 'images/fresh_products.jpg' %}" alt='Fresh produce' class='w-100 h-100 object-fit-cover'>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Value pillars -->
<section class='mb-5'>
  <div class='container'>
    <div class='row text-center g-4'>
      {% for pillar in value_pillars %}
      <div class='col-12 col-md-4'>
        <div class='p-3 border rounded h-100'>
          <div class='fw-semibold mb-1'>{{ pillar.title }}</div>
          <div class='text-muted small'>{{ pillar.subtitle }}</div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Category shortcuts -->
<section class='mb-5'>
  <div class='container'>
    {% if category_groups %}
      {% for group in category_groups %}
      <div class='mb-4'>
        <div class='d-flex justify-content-between align-items-center mb-2'>
          <h3 class='h5 mb-0'>{{ group.label }}</h3>
          <a href="{% url 'product_list' %}?l1={{ group.l1|urlencode }}" class='small text-decoration-none'>View all</a>
        </div>
        <div class='row row-cols-2 row-cols-md-3 row-cols-lg-6 g-3'>
          {% for sc in group.items %}
          <div class='col'>
            <a href="{% url 'product_list' %}?l1={{ sc.l1|urlencode }}&l2={{ sc.l2|urlencode }}" class='text-decoration-none d-block h-100'>
              <div class='card h-100'>
                <div class='ratio ratio-1x1'>
                  {% if sc.image_url %}
                    <img src="{{ sc.image_url }}" alt="{{ sc.name }}" class='w-100 h-100 object-fit-cover'>
                  {% else %}
                    <img src="{% static 'images/default_product.jpg' %}" alt="{{ sc.name }}" class='w-100 h-100 object-fit-cover'>
                  {% endif %}
                </div>
                <div class='card-body p-2 text-center'>
                  <div class='small fw-semibold text-break'>{{ sc.name }}</div>
                </div>
              </div>
            </a>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endfor %}
    {% elif subcats %}
      <div class='row row-cols-2 row-cols-md-3 row-cols-lg-6 g-3'>
        {% for sc in subcats %}
        <div class='col'>
          <a href="{% url 'product_list' %}?l1={{ sc.l1|urlencode }}&l2={{ sc.l2|urlencode }}" class='text-decoration-none d-block h-100'>
            <div class='card h-100'>
              <div class='ratio ratio-1x1'>
                {% if sc.image_url %}
                  <img src="{{ sc.image_url }}" alt="{{ sc.name }}" class='w-100 h-100 object-fit-cover'>
                {% else %}
                  <img src="{% static 'images/default_product.jpg' %}" alt="{{ sc.name }}" class='w-100 h-100 object-fit-cover'>
                {% endif %}
              </div>
              <div class='card-body p-2 text-center'>
                <div class='small fw-semibold text-break'>{{ sc.l1 }} - {{ sc.name }}</div>
              </div>
            </div>
          </a>
        </div>
        {% endfor %}
      </div>
    {% else %}
      <p class='text-muted small'>Browse all categories or use search above.</p>
    {% endif %}
  </div>
</section>

<!-- Callout -->
{% if not user.is_authenticated %}
<section class='pb-2'>
  <div class='container'>
    <div class='alert alert-success d-flex justify-content-between align-items-center' role='status'>
      <div>New here? Create an account for a faster checkout next time.</div>
      <a href="{% url 'signup' %}" class='btn btn-success btn-sm'>Sign up</a>
    </div>
  </div>
</section>
{% endif %}

{% endblock %}
