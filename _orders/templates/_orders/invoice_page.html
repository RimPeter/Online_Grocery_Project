{% extends 'base.html' %}
{% block title %}Invoice #{{ order.id }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <h1>Invoice #{{ order.id }}</h1>
  <p><strong>Date:</strong> {{ order.created_at|date:"Y-m-d H:i" }}</p>

  {% if default_address %}
    <h5 class="mt-3">Billing / Delivery Address</h5>
    <p>
      {{ default_address.street_address }}{% if default_address.apartment %}, {{ default_address.apartment }}{% endif %}<br>
      {{ default_address.city }}, {{ default_address.postal_code }}
    </p>
  {% endif %}

  <h5 class="mt-3">Items</h5>
  <ul class="list-group mb-3">
    {% for item in order_items %}
      <li class="list-group-item d-flex justify-content-between">
        <div>
          <strong>{{ item.product.name }}</strong><br>
          Qty: {{ item.quantity }} × £{{ item.price }}
        </div>
        <div>£{{ item.subtotal }}</div>
      </li>
    {% endfor %}
  </ul>

  <h4 class="text-end">Total: £{{ total }}</h4>
<div class="d-flex gap-2 mt-4">
  
  <a class="btn btn-outline-secondary" href="{% url 'invoice_pdf' order.id %}">Download PDF</a>
  <a class="btn btn-primary" href="{% url 'order_history' %}">Back to Orders</a>
</div>

  {% comment %} <div class="d-flex gap-2 mt-4">
    <button class="btn btn-outline-secondary" onclick="window.print()">Print</button>
    <a class="btn btn-primary" href="{% url 'order_history' %}">Back to Orders</a>
  </div>
</div> {% endcomment %}
{% endblock %}
