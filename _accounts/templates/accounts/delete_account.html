{% extends 'base.html' %}
{% load static %}

{% block title %}Delete Account{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <h2>Delete Account</h2>
    <p class='text-danger'>This action cannot be undone.</p>
    <div class='alert alert-warning'>
      <strong>What happens if you delete your account</strong>
      <ul class='mb-0'>
        <li>Addresses will be removed</li>
        <li>Contact messages will be removed</li>
        <li>Orders and invoices are retained for compliance</li>
        <li>Your login will be disabled immediately</li>
      </ul>
    </div>

    {# Show form errors (if any) #}
    {% if form.errors %}
      <div class="alert alert-danger">
        Please correct the error(s) below.
      </div>
    {% endif %}

    <form method='POST' novalidate>
      {% csrf_token %}
      <div class='mb-3'>
        <label for='id_password' class='form-label'>Confirm with your password</label>
        {{ form.password }}
        {% if form.password.errors %}
          <div class='text-danger small'>{{ form.password.errors|striptags }}</div>
        {% endif %}
      </div>
      <div class='mb-3'>
        <label for='id_confirm' class='form-label'>Type DELETE to confirm</label>
        {{ form.confirm }}
        {% if form.confirm.errors %}
          <div class='text-danger small'>{{ form.confirm.errors|striptags }}</div>
        {% endif %}
        {% if form.confirm.help_text %}
          <div class='form-text'>{{ form.confirm.help_text }}</div>
        {% endif %}
      </div>
      
      <button type='submit' class='btn btn-danger'>Yes, delete my account</button>
      <a class='btn btn-secondary ms-2' href='{% url 'home' %}'>Cancel</a>
    </form>
  </div>
</div>
{% endblock %}
